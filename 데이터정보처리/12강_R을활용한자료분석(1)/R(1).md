# R을 활용한 자료분석

## 학습개요

R은 자료처리, 통계분석, 그래픽스 분야 등에 탁월한 기능을 가지고 있는 무료통계시스템이다. 대화형 프로그래밍 언어를 기반으로 다양한 통계분석 함수 및 그래프 함수들을 포함하고 있다. R을 이용하여 데이터를 읽고, 처리하는 방법을 알아보고, 기술통계량을 구하는 법, 히스토그램 등 기본적인 통계그래프를 그리는 방법을 알아보도록 한다.

## 학습목표

- R 사용법을 익힐 수 있다.
- 데이터를 읽어 들이는 방법을 이해할 수 있다.
- 행렬연산 방법을 설명할 수 있다.
- 기술통계량을 구할 수 있다.
- 통계그래프를 그릴 수 있다.

### R ?

- 통계 소프트웨어 시스템: 데이터를 효율적으로 처리하고 분석, 다양한 통계적 순석과 그래프 등을 구현할 수 있는 통계 시스템
- 대화형 언어: 언어가 입력된 즉시 시행이 됨
- 객체지향 시스템
  - R은 객체를 다룰 수 있도록 구성되어 있음
  - 데이터, 변수, 행렬등은 모두 객체이며, 객체는 연산자 "<-" 또는 "="에 의해 생성됨
  - ex) a <- 10 / a = 10 / = a에 10을 저장

### R의 기능

- 자료처리
- 자료분석
- 언어기능
  - 함수문을 쉽게 작성할 수 있으며, C언어 및 FORTRAN 언어 등과 인터페이스가 가능
- 그래픽스 기능
  - 대화형 그래픽스에 의한 자료분석의 기능 및 분석결과의 그래픽스 처리 기능이 뛰어남
  - Computer Graphics (CG)?
    - 컴퓨터 화상처리. 컴퓨터를 이용하여 화상(이미지)을 제작하는 작업을 모두 통칭한다. (데이터 시각화)

### R 의 활용 예(1)

1. 주어진 데이터를 R에서 활용 가능한 데이터파일로 만들때 -> csv, excel, txt 등을 사용
2. 이렇게 만들어진 데이터 파일을 읽기
   - 위 자료를 읽을때 txt 는 Tap, csv파일은 , 로 구분(변수와 변수의 값 구분) **최근에는 csv 파일을 선호**
   - R에서 텍스트 자료 읽기(가져오기): read.table(txt), read.csv(csv)

#### csv

- 위 방법은 그냥 데이터를 읽을 뿐이고 데이터 파일을 가져와서 변수에 넣어 활용하려면 아래와 같은 코드를 사용할 수 있다.

```
> ex8 = read.csv("c:/이하 파일주소.csv")
    아까 설명했듯이 = 를 사용해도 되고 <- 를 사용해도 무관
> head(ex8)
    데이터를 잘 읽었는지 프린트 해보는 구문(전체를 프린트하지는 않고 첫 일부분만 프린트)
> head(ex8, 3)
    이런경우 3줄 혹은 3개까지만 프린트함 (기본은 6개 혹은 6줄)
> tail(ex8)
    head 는 처음부터 6개까지를 프린트, tail 은 마지막부터 6개까지를 출력
```

#ex8 처럼 객체명앞에 '#'을 넣는 경우도 있는데 이것은 해당 객체를 주석처리함을 의미(객체가 만들어졌지만 사용되지 않는게 아니라 그냥 아예 만들어지지 않음)
주석 처리된 부분은 코드실행시 무시되므로 해당 변수는 사용되지 않는다.
이렇게 주석처리를 하는 이유는 다음과 같다.

1. 코드의 가독성 향상: 변수명 앞에 주석을 추가하면 해당 객체가 어떤 역할을 하는지 쉽게 파악할 수 있다. 특히 코드가 길거나 복잡한 경우에 변수에 대한 설명을 추가하여 다른 사람이나 나중에 코드를 다시 읽을 때 이해하기 쉽게 만든다.

2. 임시로 객체를 비활성화: 특정 변수를 임시로 비활성화하고 싶을 때 사용할 수 있다. 예를 들어, 실험적인 코드나 특정 객체를 사용하지 않도록 하려는 경우 변수명 앞에 #을 넣어 해당 객체를 주석 처리할 수 있습니다.

#### excel

- 엑셀 자료 읽기: (package: xlsx, readxl) / 근래에는 readxl 을 선호
  - xlsx 의 경우는 Java 와 연동이 되어있어서 시스템상 가동이 안되는 경우가 생길 수 있음
    "

```
> ex8_xls = read.xlsx("c:/이하 파일주소.xlsx",1)
    파일주소로 불러온 정보를 ex8_xls 객체에 담음
> head(ex8_xls, 3)
    csv 와 마찬가지로 프린트해보는 방법은 동일
```

### 기술통계량 구하기

- 변수 월급여(salary)의 평균 및 표준편차 구하기
  - 각각의 항목에는 (id, sex, age, edu, salary) 가 존재하는 데이터 파일

```
> ex8 = read.csv("c:/data/ex8-1.csv)
    ex8 객체에 데이터파일 저장
> head(ex8, 3)
    ex8 객체에 변수정보가 잘 담겼는지 3개까지 프린트
> names(ex8)
    변수명만 확인하고 싶을때 사용
    if 특정 변수명만 확인하고 싶다면 (ex8$age)와 같이 객체명+$+변수명을 사용
> mean(ex8$salary)
    ex8$salary 의 평균을 구하는 명령어 mean
> sd(ex8$salary)
    ex8$salary 의 표준편차를 구하는 방법

> summary(ex8$salary) # five-number summary + mean
    # 뒤는 주석
    평균,표준편차,중앙값,제1사분위수,제3사분위수,최솟값,최대값을 한번에 보여주는 명령어(다섯수치요약)

> attach(ex8)
    데이터 프레임이나 리스트에 포함된 변수들을 현재 R작업공간에 있는 변수처럼 사용할 수 있도록 만들어줌
    예를 들어, ex8이라는 데이터 프레임이나 리스트에 변수 x, y, z가 포함되어 있다고 가정하면, attach(ex8)을 실행하면 이제부터는 x, y, z 변수를 그냥 사용할 수 있다. 예를 들어, x라는 변수에 접근할 때 ex8$x를 사용하는 대신에 그냥 x를 사용할 수 있게 되는것이다

    하지만 주의할 점은 attach() 함수를 사용하면 변수의 출처가 모호해지고, 코드를 이해하기 어려워질 수 있다는 것 또한 변수 이름 충돌이 발생할 수 있으므로 주의해야 한다. 코드의 가독성을 유지하기 위해 변수 이름 충돌을 피하고자 할 때에는 with() 함수나 $ 연산자를 사용하는 것이 더 좋은 방법일 수 있다.

```

- 표준편차
  데이터가 얼마나 평균 주변에 모여있는지를 나타내는 숫자 즉, 데이터가 얼마나 퍼져있는지를 측정하는 지표

  예를 들어, 학급의 시험 성적이 주어졌을 때, 표준편차가 작으면 대부분의 학생들이 비슷한 성적을 받았다는 의미, 하지만 표준편차가 크면 학생들의 성적이 서로 많이 다르다는 것을 의미

- 제1사분위수
  데이터를 크기순으로 정렬했을 때 하위 25%에 해당하는 위치에 있는 값을 말함 즉 전체 데이터를 4등분하여 첫번째 등분에 해당하는 값을 말함
- 제3사분위수
  데이터를 크기순으로 정렬했을때 상위 75%에 해당하는 위치에 있는 값, 즉 전체 데이터를 4등분하여 세 번째 등분에 해당하는 값을 말함

### 그룹별 기술 통계량 구하기

- 성별과 교육정도별로 월급여(salary) 의 평균 및 표준편차 구하기

```
> tapply(ex$salary, ex8$sex, mean)
    salary 열을 sex열을 기준으로 그룹화하고, 각 그룹에 대한 평균을 계산 즉 성별에따라 직원들의 급여 평균을 계산
> tapply(ex$salary, ex8$sex, sd)
    salary 열을 sex열을 기준으로 그룹화하고, 각 그룹에 대한 표준편차를 계산 즉 성별에 대한 급여의 표준편차를 계산

> mean_Sal_sex = tapply(ex$salary, ex8$sex, mean)
    해당 평균값의 대한 데이터를 mean_Sal_sex 객체에 담음
> rownames(mean_Sal_sex) = c("남","여")
    이 객체의 rownames(열 이름) 를 "남"과 "여"로 구분 (기존 데이터 파일은 1, 2로 구분되어 있었음)
    colname(행의 이름)

> sex_edu = list(ex8$sex, ex8$edu)
    list는 두 변수를 결합할때 사용
> tapply(ex8$salary, sex_edu, mean)
    salary 와 결합된 객체 sex_edu의 평균치를 계산
    1   2   3
1   NA  173.3333    310
2   235 290.0000    220
    여기서 NA 는 Not Available 을 뜻함 즉 사용불가/case가 없다
```

## 연습문제

### Q1. 그룹변수인 성별(sex)의 값에 따라 변수 salary의 평균(mean)을 구하는 명령은 ?

1. sapply(salary, sex, mean)
2. sapply(mean, sex, salary)
3. tapply(salary, sex, mean)
4. tapply(mean, sex, salary)

Q1. 정답: 4

### Q2. package xlsx를 인스톨하였다. 이를 가동시키기 위한 명령은 ?

1. system(xlsx)
2. use(xlsx)
3. library(xlsx)
4. load(xlsx)

Q2. 정답: 3

### Q3. 데이터 객체의 처음 6개의 케이스를 출력하고자 한다. R 명령은 ? > ( b )(ex.data)

1. head
2. list
3. print
4. output

Q2. 정답: 1
